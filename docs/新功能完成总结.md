# æ–°åŠŸèƒ½å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. Sessioné‡å‘½ååŠŸèƒ½

#### åŒå‡»ç¼–è¾‘
- åŒå‡»sessionæ ‡ç­¾è¿›å…¥ç¼–è¾‘æ¨¡å¼
- æ˜¾ç¤ºè¾“å…¥æ¡†ï¼Œè‡ªåŠ¨èšç„¦å¹¶å…¨é€‰æ–‡æœ¬
- æ”¯æŒEnteré”®ç¡®è®¤ã€Escé”®å–æ¶ˆ
- å¤±ç„¦è‡ªåŠ¨ä¿å­˜

#### å®ç°ç»†èŠ‚
```typescript
// åŒå‡»äº‹ä»¶
onDoubleClick={() => {
    setEditingSessionId(session.id);
    setEditingSessionName(session.name);
}}

// è¾“å…¥æ¡†å¤„ç†
onKeyDown={(e) => {
    if (e.key === 'Enter') {
        renameSession(session.id, editingSessionName.trim());
        setEditingSessionId(null);
    }
}}
```

### 2. Sessionè‡ªåŠ¨å‘½å

#### åŠŸèƒ½è¯´æ˜
- æ–°å»ºsessioné»˜è®¤åç§°ä¸º"æ–°å¯¹è¯"
- å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯åï¼Œè‡ªåŠ¨ä½¿ç”¨å‰20ä¸ªå­—ä½œä¸ºsessionåç§°
- è¶…è¿‡20å­—è‡ªåŠ¨æ·»åŠ "..."
- åªå¯¹é»˜è®¤åç§°æˆ–"å¯¹è¯ N"æ ¼å¼çš„sessionç”Ÿæ•ˆ

#### å®ç°ä»£ç 
```typescript
const autoNameSession = (sessionId: string, firstQuery: string) => {
    setSessions(prev => prev.map(s => {
        if (s.id === sessionId && (s.name === 'æ–°å¯¹è¯' || s.name.startsWith('å¯¹è¯ '))) {
            const autoName = firstQuery.slice(0, 20) + (firstQuery.length > 20 ? '...' : '');
            return { ...s, name: autoName };
        }
        return s;
    }));
};

// åœ¨handleSendMessageä¸­è°ƒç”¨
if (messages.length === 0 && !customMessage) {
    autoNameSession(currentSessionId, messageContent);
}
```

### 3. æ ‡å‡†UIå›¾æ ‡æ›¿æ¢Emoji

#### åˆ›å»ºçš„å›¾æ ‡ç»„ä»¶
åœ¨ `src/components/Icons.tsx` ä¸­åˆ›å»ºäº†å®Œæ•´çš„å›¾æ ‡åº“ï¼š

- **ç”¨æˆ·ç›¸å…³**: UserIcon, BotIcon
- **åŠŸèƒ½å›¾æ ‡**: ThinkingIcon, ToolIcon, FileIcon
- **æ“ä½œå›¾æ ‡**: CopyIcon, SaveIcon, RefreshIcon, EditIcon
- **æ§åˆ¶å›¾æ ‡**: SendIcon, StopIcon, PlusIcon, CloseIcon, CheckIcon
- **å¯¼èˆªå›¾æ ‡**: ChevronRightIcon, ChevronDownIcon
- **å…¶ä»–å›¾æ ‡**: MessageIcon, LinkIcon

#### æ›¿æ¢å®Œæˆæƒ…å†µ
âœ… ç”¨æˆ·å¤´åƒï¼šğŸ‘¤ â†’ UserIcon
âœ… AIå¤´åƒï¼šğŸ¤– â†’ BotIcon
âœ… æ€è€ƒæ ‡è¯†ï¼šğŸ¤” â†’ ThinkingIcon
âœ… å·¥å…·æ‰§è¡Œï¼šâš™ï¸ â†’ ToolIcon
âœ… æ–‡ä»¶ï¼šğŸ“„ â†’ FileIcon
âœ… é“¾æ¥ï¼šğŸ“ â†’ LinkIcon
âœ… å¤åˆ¶ï¼šğŸ“‹ â†’ CopyIcon
âœ… ä¿å­˜ï¼šğŸ’¾ â†’ SaveIcon
âœ… åˆ·æ–°ï¼šğŸ”„ â†’ RefreshIcon
âœ… ç¼–è¾‘ï¼šâœï¸ â†’ EditIcon
âœ… å‘é€ï¼šğŸš€ â†’ SendIcon
âœ… åœæ­¢ï¼šâ¹ â†’ StopIcon
âœ… æ–°å»ºï¼š+ â†’ PlusIcon
âœ… åˆ é™¤/å…³é—­ï¼šÃ— â†’ CloseIcon
âœ… ç¡®è®¤ï¼šâœ“ â†’ CheckIcon
âœ… å±•å¼€/æŠ˜å ï¼šâ–¶/â–¼ â†’ ChevronRightIcon/ChevronDownIcon

### 4. Ctrl+Enterå¿«æ·é”®ä¿®å¤

#### é—®é¢˜åˆ†æ
ä¹‹å‰çš„å®ç°åœ¨popupæ˜¾ç¤ºæ—¶ä¼šé˜»æ­¢å‘é€ï¼Œä½†Ctrl+Enteræ˜¯æ˜ç¡®çš„å‘é€æ„å›¾ï¼Œä¸åº”è¯¥è¢«é˜»æ­¢ã€‚

#### è§£å†³æ–¹æ¡ˆ
```typescript
onKeyDown={(e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        // å…³é—­æ‰€æœ‰popup
        setShowTools(false);
        setShowFiles(false);
        // ç«‹å³å‘é€æ¶ˆæ¯
        handleSendMessage();
        return;
    }
    
    // æ™®é€šEnteré”®åœ¨popupæ˜¾ç¤ºæ—¶ä¸å‘é€
    if (e.key === 'Enter' && !e.shiftKey && (showTools || showFiles)) {
        return;
    }
}}
```

#### ä¿®å¤æ•ˆæœ
- âœ… Ctrl/Cmd+Enter åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½å‘é€æ¶ˆæ¯
- âœ… å‘é€å‰è‡ªåŠ¨å…³é—­æ‰€æœ‰popup
- âœ… æ™®é€šEnteråœ¨popupæ˜¾ç¤ºæ—¶ä¸ä¼šè¯¯è§¦å‘

## ğŸ“Š æ”¹è¿›å¯¹æ¯”

### Sessionç®¡ç†
**ä¹‹å‰ï¼š**
- åªèƒ½ä½¿ç”¨é»˜è®¤åç§°
- æ— æ³•é‡å‘½å
- éš¾ä»¥åŒºåˆ†å¤šä¸ªsession

**ç°åœ¨ï¼š**
- åŒå‡»å³å¯é‡å‘½å
- è‡ªåŠ¨ä½¿ç”¨é¦–å¥å‘½å
- æ¸…æ™°æ˜“è¯†åˆ«

### å›¾æ ‡ç³»ç»Ÿ
**ä¹‹å‰ï¼š**
- ä½¿ç”¨emojiå›¾æ ‡
- é£æ ¼ä¸ç»Ÿä¸€
- åœ¨æŸäº›ç³»ç»Ÿæ˜¾ç¤ºå¼‚å¸¸

**ç°åœ¨ï¼š**
- æ ‡å‡†SVGå›¾æ ‡
- é£æ ¼ç»Ÿä¸€ä¸“ä¸š
- è·¨å¹³å°æ˜¾ç¤ºä¸€è‡´

### å¿«æ·é”®
**ä¹‹å‰ï¼š**
- åœ¨æŸäº›æƒ…å†µä¸‹å¤±æ•ˆ
- é€»è¾‘ä¸æ¸…æ™°

**ç°åœ¨ï¼š**
- ä»»ä½•æƒ…å†µéƒ½èƒ½æ­£å¸¸å·¥ä½œ
- é€»è¾‘æ˜ç¡®å¯é 

## ğŸ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### 1. Sessionå‘½åä½“éªŒ
- ç›´è§‚çš„åŒå‡»ç¼–è¾‘
- æ™ºèƒ½çš„è‡ªåŠ¨å‘½å
- æµç•…çš„äº¤äº’åé¦ˆ

### 2. è§†è§‰ä¸€è‡´æ€§
- æ‰€æœ‰å›¾æ ‡ç»Ÿä¸€ä½¿ç”¨SVG
- å›¾æ ‡å¤§å°åè°ƒä¸€è‡´
- ä¸Obsidiané£æ ¼èåˆ

### 3. äº¤äº’å¯é æ€§
- å¿«æ·é”®ç¨³å®šå¯é 
- å“åº”è¿…é€Ÿå‡†ç¡®
- ç¬¦åˆç”¨æˆ·é¢„æœŸ

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### å›¾æ ‡ç»„ä»¶è®¾è®¡
```typescript
interface IconProps {
    size?: number;
    style?: React.CSSProperties;
}

export const UserIcon = ({ size = 16, style }: IconProps) => (
    <svg width={size} height={size} ...>
        <!-- SVGè·¯å¾„ -->
    </svg>
);
```

**ç‰¹ç‚¹ï¼š**
- å¯é…ç½®å¤§å°
- æ”¯æŒè‡ªå®šä¹‰æ ·å¼
- ç»§æ‰¿å½“å‰é¢œè‰²
- TypeScriptç±»å‹å®‰å…¨

### SessionçŠ¶æ€ç®¡ç†
```typescript
interface Session {
    id: string;
    name: string;
    messages: Message[];
    chatHistory: any[];
    timestamp: number;
}

const [sessions, setSessions] = useState<Session[]>([...]);
const [editingSessionId, setEditingSessionId] = useState<string | null>(null);
```

### å¿«æ·é”®äº‹ä»¶å¤„ç†
- ä¼˜å…ˆå¤„ç†Ctrl+Enter
- æ¸…ç†popupçŠ¶æ€
- é˜»æ­¢é»˜è®¤è¡Œä¸º
- ç«‹å³æ‰§è¡Œå‘é€

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Icons.tsx          # æ–°å¢ï¼šå›¾æ ‡ç»„ä»¶åº“
â”œâ”€â”€ views/
â”‚   â””â”€â”€ ChatComponent.tsx  # æ›´æ–°ï¼šæ‰€æœ‰UIæ”¹è¿›
â””â”€â”€ ...
```

## âš™ï¸ é…ç½®å’Œä½¿ç”¨

### é‡å‘½åSession
1. åŒå‡»sessionæ ‡ç­¾
2. è¾“å…¥æ–°åç§°
3. æŒ‰Enterç¡®è®¤æˆ–ç‚¹å‡»å…¶ä»–åœ°æ–¹

### è‡ªåŠ¨å‘½å
- å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯åè‡ªåŠ¨ç”Ÿæ•ˆ
- æ‰‹åŠ¨é‡å‘½ååä¸å†è‡ªåŠ¨æ›´æ–°

### å¿«æ·é”®
- `Ctrl/Cmd + Enter`: å‘é€æ¶ˆæ¯ï¼ˆä»»ä½•æ—¶å€™ï¼‰
- `Enter`: åœ¨ç¼–è¾‘sessionåç§°æ—¶ç¡®è®¤
- `Esc`: å–æ¶ˆç¼–è¾‘sessionåç§°

## ğŸ”„ å…¼å®¹æ€§

- âœ… Windows (Ctrl+Enter)
- âœ… macOS (Cmd+Enter)
- âœ… Linux (Ctrl+Enter)
- âœ… æ‰€æœ‰ç°ä»£æµè§ˆå™¨
- âœ… Obsidian æ¡Œé¢ç‰ˆ
- âœ… Obsidian ç§»åŠ¨ç‰ˆï¼ˆå›¾æ ‡è‡ªé€‚åº”ï¼‰

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. ~~Sessioné‡å‘½å~~ âœ…
2. ~~è‡ªåŠ¨å‘½å~~ âœ…
3. ~~æ ‡å‡†å›¾æ ‡~~ âœ…
4. ~~å¿«æ·é”®ä¿®å¤~~ âœ…
5. å·¥å…·è°ƒç”¨ä¼˜åŒ–ï¼ˆè¿ç»­æŠ˜å ã€æ–‡æ¡£ç¼©ç•¥å›¾ï¼‰ ğŸ”„

## ğŸ“ æ›´æ–°æ—¥å¿—

**v1.2.0** - 2024-XX-XX
- âœ¨ æ–°å¢ï¼šSessionåŒå‡»é‡å‘½ååŠŸèƒ½
- âœ¨ æ–°å¢ï¼šSessionè‡ªåŠ¨å‘½ååŠŸèƒ½
- ğŸ¨ æ”¹è¿›ï¼šä½¿ç”¨æ ‡å‡†SVGå›¾æ ‡æ›¿æ¢emoji
- ğŸ› ä¿®å¤ï¼šCtrl+Enterå¿«æ·é”®åœ¨æ‰€æœ‰æƒ…å†µä¸‹æ­£å¸¸å·¥ä½œ
- ğŸ’„ ä¼˜åŒ–ï¼šç»Ÿä¸€çš„å›¾æ ‡é£æ ¼å’Œå¤§å°
- ğŸ”§ é‡æ„ï¼šåˆ›å»ºç‹¬ç«‹çš„å›¾æ ‡ç»„ä»¶åº“

